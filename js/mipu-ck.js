var util={setCookie:function(e,t,n,r,i,s){var o=e+"="+encodeURIComponent(t);n&&(o+="; expires="+n.toGMTString());r&&(o+="; path="+r);i&&(o+="; domain="+i);s&&(o+="; secure");document.cookie=o},getCookie:function(e){var t="(?:; )?"+e+"=([^;]*);?",n=new RegExp(t);return n.test(document.cookie)?decodeURIComponent(RegExp.$1):null},deleteCookie:function(e,t,n){var r=e+"=; expires="+(new Date(0)).toGMTString();t&&(r+="; path="+t);n&&(r+="; domain="+n);document.cookie=r},isLogin:function(e){var t=this.getCookie("userId"),n=!1;if(!t){n=!1;e(n)}else{n=!0;e(n,t)}},isNative:function(){try{if(!!WE)return!0}catch(e){}return!1},WebEventTrigger:function(e,t){try{if(WE&&WE.trigger){typeof t!="string"&&(t=JSON.stringify(t));return WE.trigger(e,t)}}catch(n){}return!1},goHome:function(){this.WebEventTrigger("gohome",null)||(location.href="http://m.xiaomi.com/index.html#ac=home&op=index1")},doLogin:function(){this.WebEventTrigger("login",null)||(location.href="http://m.xiaomi.com/index.html#ac=account&op=index")},isAbility:function(){return!window.webkitURL&&(!window.URL||!window.FormData||!window.FileReader)?!1:!0},showLoad:function(){$("#maskLoad").find("span").html("上传中...");$("#maskLoad").attr("style","display:block;")},hideLoad:function(){$("#maskLoad").attr("style","display:none;")},sucMsg:function(e){$("#maskLoad").find("span").html(e)},TestRegExp:function(e,t){e=new RegExp(e);return e.test(t)},IsTelephone:function(e){if(typeof e=="undefined")return!1;var t=/^(\+86)?1[3,5,8](\d{9})$/;return this.TestRegExp(t,e)},getToken:function(){var e=document.location.hash;return e!=""&&e[0]=="#"?e.substr(1):e},parseToken:function(e,t){e=e||"";var n={},r=e.split(t);if(!!r&&r.length>0)for(var i=0,s=r.length,o,u;i<s;i++){o=r[i].split("=");if(!o||!o.length)continue;u=o.shift();if(!u)continue;n[u]=o.join("=")}return n},getAction:function(e){var t=e.substring(0,1).toUpperCase(),n=e.toLowerCase().substring(1,e.length);return t+n},run:function(hash){var token=this.getToken();hash&&(token=hash.replace("#",""));if(token!=""){var obj=this.parseToken(token,"&"),ac=this.getAction(obj.ac),op=this.getAction(obj.op);try{var actionFn=eval(ac+"."+op);typeof actionFn=="function"&&actionFn(obj)}catch(e){}}}};Set={Cookie:function(e){var t=e.serviceToken,n=e.userId;util.setCookie("serviceToken",t,"","/",".xiaomi.com");util.setCookie("ticketToken",t,"","/",".xiaomi.com");util.setCookie("userId",n,"","/",".xiaomi.com")}};